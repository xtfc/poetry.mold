verison: "0.3.0"

includes:
  - url: "github.com/xtfc/std.mold"

recipes:
  install:
    help: "Install project dependencies"
    command: ["poetry", "install", "--no-dev"]

  install-dev:
    help: "Install development dependencies"
    command: ["poetry", "install"]

  update:
    help: "Update project dependencies"
    command: ["poetry", "update"]

  setup:
    help: "Generate setup.py using dephell"
    type: "sh"
    script: |
      poetry run dephell deps convert --from poetry --to-format setuppy --to-path setup.py

  reqs:
    help: "Lock dependencies to requirements.txt"
    type: "sh"
    script: |
      poetry export -f requirements.txt -o requirements.txt
      poetry export -f requirements.txt -o requirements-dev.txt --dev
      sed -i -e 's/^\-e //' requirements.txt requirements-dev.txt
      sed -ni -e '/--hash/!p' requirements.txt requirements-dev.txt
      sed -i -e 's/ \\$//' requirements.txt requirements-dev.txt
